<div class="m-3">
  <app-modal-cmp [toggle]="loading" [fixWidth]="false">
    <div class="d-flex justify-content-center align-items-center"><app-loader></app-loader></div>
  </app-modal-cmp>
  <form *ngIf="render">
    <h4>Carga de resultados de exámenes</h4>
    <hr />

    <div class="row mb-2">
      <div class="col-9">
        <div class="row mb-2">
      
          <!--
          <table class="mt-4 table table-striped table-mini table-bordered">
            <thead>
              <tr>
                <th width="150">Grupo</th>
                <th width="150">Examen</th>
                <th width="150">Campo</th>
                <th>Valor</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngIf="rows.length == 0">
                <td colspan="4">No hay campos para completar</td>
              </tr>
              <tr *ngFor="let o of rows; let ii = index;">
                <td>
                  {{o.ExamTypeName}}
                </td>
                <td>
                  {{o.ExamName}}
                </td>
                <td>
                  {{o.Name}}
                </td>
                <td>
                  <input *ngIf="o.ExamDataType == 'number'" type="text" (keypress)="numberOnly($event)" class="form-control" name="value_{{ii}}" [(ngModel)]="o.Value" />
                  <input *ngIf="o.ExamDataType == 'text'" type="text" class="form-control" name="value_{{ii}}" [(ngModel)]="o.Value" />
                  <div *ngIf="o.ExamDataType == 'boolean'" class="checkbox"><input type="checkbox" name="value_{{ii}}" [(ngModel)]="o.Value" /> confirma</div>
                </td>
              </tr>
            </tbody>
          </table>
          -->
          <ng-container *ngFor="let t of table; let i2 = index">
          <div class="col-6">
            <h4>{{t.ExamTypeName}}</h4>
            <table class="mt-4 table table-mini">
              <tbody>
                <tr *ngIf="t.items.length == 0">
                  <td colspan="2">No hay campos para completar</td>
                </tr>
                <tr *ngFor="let o of t.items; let ii = index;">
                  <td>
                    {{o.Name}}
                  </td>
                  <td>
                    <input *ngIf="o.ExamDataType == 'number'" type="text" (keypress)="numberOnly($event)" class="form-control" name="value_{{ii}}" [(ngModel)]="o.Value"  />
                    <input *ngIf="o.ExamDataType == 'text'" type="text" class="form-control" name="value_{{ii}}" [(ngModel)]="o.Value" />
                    <div *ngIf="o.ExamDataType == 'boolean'" class="checkbox"><input type="checkbox" name="value_{{ii}}" [(ngModel)]="o.Value" /> confirma</div>
                  </td>
                </tr>
              </tbody>
            </table>              
          </div>
          </ng-container>
          
          <div class="col-6">
            <h4>Observaciones</h4>
            <table class="mt-4 table table-mini">
              <tbody>
                <tr>
                  <td>
                   <textarea style="height: 180px;" class="form-control"></textarea>
                  </td>
                </tr>
              </tbody>
            </table>              
          </div>
      </div>
      </div>
      <div class="col-3">
        <textarea class="form-control"  style="height: 500px; padding:10px; border: 1px solid gray;">
          2024-06-14 19:20:05

ANTROPOMETRIA
Peso: 102 Talla: 167  IMC: 0

ANTECEDENTES
Ciudad donde Vive: Valdivia 
Profesión: Profesora
Médicos: Hernia lumbar, Apnea (CPAP hace aprox 5 años), hígado graso, DLP, resistencia a la insulina
Farmacos: metformina, rosuvastatina, tellmi-D, fluoxetina, furosemida, lirex
Quirúrgicos: Cesarea x1, meniscos izquierda. Amigdalas, apendice (vía lap), trompas falopio (2016 vía lap)
Alergias: Metales. Mieloxicam, nitrofurantoína.
Hábitos: Viene con su esposo Milton

CADIOLÓGICOS
Electrocardiograma: Normal
Ecocardiograma: Normal

ECOGRAFÍA
Ecografía Abdominal: esteatosis hepatica difusa leve

ENDOSCÓPICOS
Test de Ureasa: Negativo
Endoscopía Digestiva: Gastropatia erosiva de antro. Duodenopatia hemorragica del bulbo.

ESPECIALISTAS
Evaluación por Nutricionista: Arantxa

IMAGENOLOGÍA
Radiografía de Torax: Curva cifotica en la transicion dorsolumbar, resto normal

SANGRE
Triglicéridos: 150
Colesterol Total: 180
HDL: 0
HOMA: 200
Plaquetas: 100
Pruebas Tiroideas: Normal
Pruebas Hepáticas: Normal
LDL: 78
Niveles de Vitamina D: 18.9
Hemograma: Normal
Hematocrito: 43.6
Glóbulos Blancos: 8200
Hemoglobina Glicosilada: 5.5
Glicemia Ayuno: 95

        </textarea>
      </div>

    </div>

    <div class="row my-3">
      <div class="col text-end">
        <button type="button" class="btn btn-default float-start" [disabled]="loading" (click)="cancel()">Cancelar</button>
        <button type="button" (click)="save()" class="btn btn-success" [disabled]="loading">Guardar <fa-icon [hidden]="!loading" [icon]="faSpinner" [spin]="true"></fa-icon></button>
      </div>
    </div>
  </form>
</div>
