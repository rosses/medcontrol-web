<div class="m-3">
  <app-modal-cmp [toggle]="loading" [fixWidth]="false">
    <div class="d-flex justify-content-center align-items-center"><app-loader></app-loader></div>
  </app-modal-cmp>
  <form *ngIf="render">
    <h4>Resultados de ex√°menes ({{fecha}})</h4>
    <hr />

    <div class="row mb-2">
      <div class="col-9">
        <div class="row mb-2">
          <div class="col-6">
            <ng-container *ngFor="let t of itemsA; let i = index">
              <h5>{{t.ExamTypeName}}</h5>
              <table class="mt-1 table table-mini">
                <tbody>
                  <tr *ngFor="let o of getItemsByExamTypeId(t.ExamTypeID); trackBy0: trackByFna0; let ii = index">
                    <td [attr.data-examdataid]="o.ExamDataID" [attr.data-examtypeid]="t.ExamTypeID">{{o.Name}}</td>
                    <td>
                      <input *ngIf="o.ExamDataType == 'number'" type="text" (keypress)="numberOnly($event)" class="form-control" (keyup)="setValue(o.ExamDataID, $event)" name="value_{{i}}_{{ii}}" [ngModel]="getValue(o.ExamDataID)"  />
                      <input *ngIf="o.ExamDataType == 'text'" type="text" class="form-control" name="value_{{i}}_{{ii}}" (keyup)="setValue(o.ExamDataID, $event)" [ngModel]="getValue(o.ExamDataID)" />
                      <textarea style="height: 40px;" *ngIf="o.ExamDataType == 'textarea'" class="form-control" name="value_{{i}}_{{ii}}" (keyup)="setValue(o.ExamDataID, $event)" [ngModel]="getValue(o.ExamDataID)"></textarea>
                      <div *ngIf="o.ExamDataType == 'boolean'" class="checkbox"><input type="checkbox" name="value_{{i}}_{{ii}}" (keyup)="setValue(o.ExamDataID, $event)" [ngModel]="getValue(o.ExamDataID)" /> confirma</div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-container>

          </div>
          <div class="col-6">

            <ng-container *ngFor="let t of itemsB; let i = index">
              <h5>{{t.ExamTypeName}}</h5>
              <table class="mt-1 table table-mini">
                <tbody>
                  <tr *ngFor="let o of getItemsByExamTypeId(t.ExamTypeID);  trackBy: trackByFna1; let ii = index">
                    <td [attr.data-examdataid]="o.ExamDataID" [attr.data-examtypeid]="t.ExamTypeID">{{o.Name}}</td>
                    <td>
                      <input *ngIf="o.ExamDataType == 'number'" type="text" (keypress)="numberOnly($event)" class="form-control" name="value_{{i}}_{{ii}}" [ngModel]="getValue(o.ExamDataID)" (keyup)="setValue(o.ExamDataID, $event)"  />
                      <input *ngIf="o.ExamDataType == 'text'" type="text" class="form-control" name="value_{{i}}_{{ii}}" [ngModel]="getValue(o.ExamDataID)" (keyup)="setValue(o.ExamDataID, $event)" />
                      <textarea style="height: 40px;" *ngIf="o.ExamDataType == 'textarea'" class="form-control" name="value_{{i}}_{{ii}}" [ngModel]="getValue(o.ExamDataID)" (keyup)="setValue(o.ExamDataID, $event)"></textarea>
                      <div *ngIf="o.ExamDataType == 'boolean'" class="checkbox"><input type="checkbox" name="value_{{i}}_{{ii}}" [ngModel]="getValue(o.ExamDataID)" (keyup)="setValue(o.ExamDataID, $event)" /> confirma</div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-container>
            <h5>Observaciones</h5>
            <table class="mt-4 table table-mini">
              <tbody>
                <tr>
                  <td>
                   <textarea style="height: 180px;" class="form-control"></textarea>
                  </td>
                </tr>
              </tbody>
            </table> 
            
          </div>

          
        </div>
      </div>
      <div class="col-3">
        <textarea class="form-control"  style="height: 500px; padding:10px; border: 1px solid gray;" disabled>
 
        </textarea>
      </div>
    </div>

    <div class="row my-3">
      <div class="col text-end">
        <button type="button" class="btn btn-default float-start" [disabled]="loading" (click)="cancel()">Cancelar</button>
        <button type="button" (click)="save()" class="btn btn-success" [disabled]="loading">Guardar <fa-icon [hidden]="!loading" [icon]="faSpinner" [spin]="true"></fa-icon></button>
      </div>
    </div>
  </form>
</div>
